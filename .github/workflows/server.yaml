name: Image size

on:
    push:
        branches:
        - master

jobs:
    ci:
        name: CI
        runs-on: ubuntu-latest
        steps:
            - name: Checkout the repository
              uses: actions/checkout@v1

            - name: Build Docker image
              run: |
                docker build  --tag server/image:${{ github.sha }} -f test.Dockerfile .

            - name: Check size of image    
              run: |
                docker images server/image

            - name: Run container and test
              run: |
                docker run server/image:${{ github.sha }}